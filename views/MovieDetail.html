<div ng-controller="MovieDetailController">
    <div ng-include="'views/ProgressBar.html'" ng-show="uiState=='loading'">
    </div>
    <div class="row">
        <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2">
            <img ng-src="{{::model.cover}}" class="cover img-responsive">
            <button class="btn btn-success btn-block" ng-if="model.rented_by==null" ng-click="rentMovie()">Alquilar</button>
            <button class="btn btn-warning btn-block" disabled ng-if="model.rented_by!=null">Alquilada</button>
            <a href="#/movies/" class="btn btn-primary btn-block">Volver</a>
        </div>
        <div class="col-xs-12 col-sm-10 col-md-10 col-lg-10">
            <div class="row">
                <div class="col-xs-12">
                    <h1>{{::model.title }}</h1>
                    <p>
                        {{::model.overview }}
                    </p>
                </div>
                <div class="col-xs-6">
                    <span class="label label-info">Valoración: {{::model.rating}}</span>
                    <span class="label label-primary">Fecha de estreno: {{::model.release_date | date:"dd/MM/yyyy" }}</span>
                    <span class="label label-warning" ng-if="model.last_rent_date!=null">Fecha del último alquiler: {{ model.last_rent_date | date:"dd/MM/yyyy"}}</span>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="row" ng-if="model.rented_by==currentUser()">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8 col-lg-offset-2">
            <div class="embed-responsive embed-responsive-16by9">
                <video controls return-on-video-end="unrentMovie()" ng-src="{{ trustSrc() }}" type="video/mp4">
                </video>
            </div>
        </div>
    </div>
</div>
